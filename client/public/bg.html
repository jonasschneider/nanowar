<!DOCTYPE html> 
<html> 
<head> 
<title>Nano War</title> 
<link href="/style.css" rel="stylesheet" type="text/css"/> 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js" type="text/javascript"></script> 
<script src="app/vendor/underscore.js"></script> 
<script src="app/vendor/raphael.js"></script> 

<script src="app/vendor/processing-1.3.0.js"></script> 
<body> 
<canvas id="background" data-processing-sources="background.pde"></canvas>
<style>
body {
  overflow: hidden
}
</style>
<div id="test"></div>

<script>
$(document).ready(function() {
  var paper = Raphael("test", 700, 700);
  
  svg = $("#test svg")[0]
  console.log(svg)
  
  
  
  
  //var clone = document.importNode(nodeFromAnotherDoc,true);
  
  $.get('/images/defs.svg', function(defsSVG) {
    svg.appendChild(defsSVG.getElementById("nanowarDefs"))
  })
  
  
  layers = paper.set()
  
  layers.push(shadow1 = paper.circle(0,0,40))
  shadow1.attr({fill: "black" })
  shadow1.node.setAttribute("filter", "url(#cellShadow)")
  
  layers.push(bg = paper.circle(0,0,40))
  bg.attr({fill: "url(#blueBackground)"})
  
  layers.push(metal = paper.circle(0,0,40))
  metal.attr({fill: "url(#metalPattern)"})
  
  layers.push(fg = paper.circle(0,0,40))
  fg.attr({fill: "url(#blueForeground)"})
  
  layers.push(hover = paper.circle(0,0,40))
  hover.attr({fill: 'white', opacity: 0.0})
  hover.node.onmouseover = function() {
    hover.attr({opacity: 0.05})
  }
  hover.node.onmouseout = function() {
    hover.attr({opacity: 0})
  }
  
  hover.node.onclick = function() {
    shadow1.attr({fill: "white" })
  }
  
  layers.attr({stroke: 'none', cx: 300, cy: 300})
  
  setTimeout(function() {
    layers.animate({r: 50}, 500, 'bounce')
  }, 1600)
  
  
  
  
  
  layers2 = paper.set()
  
  layers2.push(shadow = paper.circle(0,0,40))
  shadow.attr({fill: "black" })
  shadow.node.setAttribute("filter", "url(#cellShadow)")
  
  layers2.push(bg = paper.circle(0,0,40))
  bg.attr({fill: "url(#redBackground)"})
  
  layers2.push(metal = paper.circle(0,0,40))
  metal.attr({fill: "url(#metalPattern)"})
  
  layers2.push(fg = paper.circle(0,0,40))
  fg.attr({fill: "url(#redForeground)"})
  
  layers2.attr({stroke: 'none', cx: 450, cy: 300})
  
  setTimeout(function() {
    layers2.animate({r: 50}, 500, 'bounce')
  }, 2000)
  
  
  
  
  layers3 = paper.set()
  
  layers3.push(shadow = paper.circle(0,0,40))
  shadow.attr({fill: "black" })
  shadow.node.setAttribute("filter", "url(#cellShadow)")
  
  layers3.push(bg = paper.circle(0,0,40))
  bg.attr({fill: "url(#greyBackground)"})
  
  layers3.push(metal = paper.circle(0,0,40))
  metal.attr({fill: "url(#metalPattern)"})
  
  layers3.push(fg = paper.circle(0,0,40))
  fg.attr({fill: "url(#greyForeground)"})
  
  layers3.attr({stroke: 'none', cx: 600, cy: 300})
  
  setTimeout(function() {
    layers3.animate({r: 50}, 500, 'bounce')
  }, 2400)
  
  
})
</script>
</body></html>